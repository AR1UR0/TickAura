<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TickAura</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>
<body>
    <!-- Menú de Navegación -->
    <header>
        <nav>
            <div class="logo"><p style="font-family: titulo;">Eventos</p></div>
            <ul class="nav-enlaces">
                <li><a href="./index.html">Inicio</a></li>
                <li><a href="./eventos.html">Eventos</a></li>
                <li><a href="./contacto.html">Contacto</a></li>
                <li><button class="boton-inicio">Iniciar sesión</button></li>
            </ul>
        </nav>
    </header>

    <!-- Contenido Principal -->
    <main id="contenido-principal" style="flex-direction: column;">
        <!-- Filtros (Alineados horizontalmente) -->
        <div class="filtros">
            <select id="tipo-evento">
                <option value="-">Tipo de Evento</option>
                <option value="concierto">Concierto</option>
                <option value="festival">Festival</option>
                <option value="evento">Evento</option>
                <option value="teatro">Teatro</option>
            </select>

            <select id="ciudad">
                <option value="-">Ciudad</option>
                <option value="Madrid">Madrid</option>
                <option value="Barcelona">Barcelona</option>
                <option value="Valencia">Valencia</option>
            </select>

            <div class="slider-container">
                <input type="range" id="precio" min="0" max="500" value="500">
                <span id="precio-valor">TODOS</span>
            </div>
        </div>

        <!-- Grid de Eventos -->
        <div class="grid-container">
            <div class="grid-item" data-evento="Autoshow">Autoshow</div>
            <div class="grid-item" data-evento="Bernarda">Bernarda</div>
            <div class="grid-item" data-evento="Coachella">Coachella</div>
            <div class="grid-item" data-evento="Coldplay">Coldplay</div>
            <div class="grid-item" data-evento="Comic Con">Comic Con</div>
            <div class="grid-item" data-evento="Don Juan Tenorio">Don Juan Tenorio</div>
            <div class="grid-item" data-evento="Feria de la Ciencia">Feria de la Ciencia</div>
            <div class="grid-item" data-evento="Feria del Libro">Feria del Libro</div>
            <div class="grid-item" data-evento="Gaming Expo">Gaming Expo</div>
            <div class="grid-item" data-evento="Glastongury">Glastongury</div>
            <div class="grid-item" data-evento="Hamlet">Hamlet</div>
            <div class="grid-item" data-evento="Lollapalooza">Lollapalooza</div>
            <div class="grid-item" data-evento="Melendi">Melendi</div>
            <div class="grid-item" data-evento="Metallica">Metallica</div>
            <div class="grid-item" data-evento="Tributo Queen">Tributo Queen</div>
            <div class="grid-item" data-evento="El Rey León">El Rey León</div>
            <div class="grid-item" data-evento="Rock in Rio">Rock in Rio</div>
            <div class="grid-item" data-evento="Romeo y Julieta">Romeo y Julieta</div>
            <div class="grid-item" data-evento="Tomorrowland">Tomorrowland</div>
            <div class="grid-item" data-evento="Shakira">Shakira</div>
        </div>
    </main>

    <div style="margin-bottom: 900px;"></div>

    <footer>
        <div class="iconos-sociales">
            <a href="#"><img src="./fb.png" alt="Facebook"></a>
            <a href="#"><img src="./tw.png" alt="Twitter"></a>
            <a href="#"><img src="./ig.png" alt="Instagram"></a>
            <a href="#"><img src="./ws.png" alt="WhatsApp"></a>
        </div>
        <div class="titulo-footer">TickAura</div>
    </footer>

    <script>
        const slider = document.getElementById("precio");
        const precioValor = document.getElementById("precio-valor");

        slider.addEventListener("input", function() {
            if (slider.value == 500) {
                precioValor.textContent = "TODOS";
            } else {
                precioValor.textContent = `<${slider.value}€`;
            }
        });
    </script>

    <script>
        // Función para cargar el archivo JSON
async function cargarEventos() {
    try {
      // Cargamos el archivo JSON con fetch
      const response = await fetch('eventos.json');
      const eventos = await response.json();
      
      // Obtener los filtros
      const tipoEvento = document.getElementById('tipo-evento');
      const ciudad = document.getElementById('ciudad');
      const slider = document.getElementById('precio');
      const precioValor = document.getElementById('precio-valor');
      
      // Mostrar el valor del slider
      precioValor.textContent = slider.value;
  
      // Agregar un evento al slider para actualizar el valor
      slider.addEventListener('input', () => {
        precioValor.textContent = slider.value;
        filtrarEventos(eventos, tipoEvento.value, ciudad.value, slider.value);
      });
  
      // Filtrar eventos cuando se cambian los filtros
      tipoEvento.addEventListener('change', () => {
        filtrarEventos(eventos, tipoEvento.value, ciudad.value, slider.value);
      });
  
      ciudad.addEventListener('change', () => {
        filtrarEventos(eventos, tipoEvento.value, ciudad.value, slider.value);
      });
  
      // Función para filtrar y mostrar los eventos
      function filtrarEventos(eventos, tipo, ciudad, precio) {
        // Limpiar los elementos del grid
        const gridItems = document.querySelectorAll('.grid-item');
        gridItems.forEach(item => {
          item.style.display = 'block';  // Por defecto, todos son visibles
        });
  
        // Filtrar eventos según los filtros seleccionados
        eventos.forEach(evento => {
          const eventoNombre = evento.nombre;
          const tipoEvento = evento.tipo;
          const ubicacionEvento = evento.ubicacion;
          const precioEvento = evento.precio;
  
          // Buscar el elemento de la cuadrícula correspondiente al nombre del evento
          const gridItem = document.querySelector(`.grid-item[data-evento="${eventoNombre}"]`);
  
          // Condiciones de filtrado
          const filtroTipo = tipo === '-' || tipoEvento === tipo;
          const filtroCiudad = ciudad === '-' || ubicacionEvento === ciudad;
          const filtroPrecio = precioEvento <= precio;
  
          // Si no pasa alguna condición, ocultamos el evento en el grid
          if (!(filtroTipo && filtroCiudad && filtroPrecio)) {
            gridItem.style.display = 'none';
          }
        });
      }
  
      // Inicializamos la primera filtración
      filtrarEventos(eventos, tipoEvento.value, ciudad.value, slider.value);
  
    } catch (error) {
      console.error('Error al cargar el archivo JSON:', error);
    }
  }
  
  // Llamamos a la función para cargar los eventos cuando la página esté lista
  window.onload = cargarEventos;
    </script>

    <script src="imagenes.js"></script>

</body>
</html>
